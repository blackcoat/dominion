<div class="row">

  <!-- Kingdom Cards -->
  <div class="span2" id="kingdom-cards">
    <%= render partial: 'cards', locals: { cards: @game.kingdom_cards } %>
  </div>

  <!-- Common Cards -->
  <div class="span1" id="common-cards">
    <%= render partial: 'cards', locals: { cards: @game.victory_cards } %>
    <%= render partial: 'cards', locals: { cards: @game.treasure_cards } %>
    <%= render partial: 'cards', locals: { cards: [@game.curse_card] } %>
  </div>

  <div class="span6">
    <div id="game-log">
      Turn Order is: <%= @game.game_players.collect(&:username).join(', ') %><br /><br />
      <strong>- <%= @game.current_turn.game_player.player_id == current_player.id ? 'Your' : "#{@game.current_turn.game_player.username}'s" %> turn <%= @game.turn % @game.player_count %> -</strong>
    </div>
    <div id="action-area">
    </div>
    <div id="hand">
      <% last_card = 0 %>
      <% card_count = 0 %>
      <% @game.game_player(current_player.id).hand.each do |player_card|
        card = player_card.card
        if card.id == last_card
          card_count += 1
        else
          card_count.times do %>
            </ul>
          <% end %>
          <% unless last_card == 0 %>
            </div>
          <% end %>
          <div class="hand-card">
          <% card_count = 1 %>
          <% last_card = card.id %>
        <% end %>
        <ul><li><%= image_tag "#{card.name}.jpg", size: '64x103', class: 'kingdom-card card' %></li>
      <% end %>
    </div>
  </div>
</div>

<%= javascript_include_tag "websockets/game", "data-turbolinks-track" => true %>
